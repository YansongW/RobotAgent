<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RobotAgent MVP - 智能机器人助手</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- 头部 -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-robot"></i>
                    <h1>RobotAgent MVP</h1>
                </div>
                <div class="status-indicator">
                    <span class="status-dot" id="statusDot"></span>
                    <span class="status-text" id="statusText">连接中...</span>
                </div>
            </div>
        </header>

        <!-- 主要内容区域 -->
        <main class="main-content">
            <!-- 对话区域 -->
            <div class="chat-container">
                <div class="chat-header">
                    <h2><i class="fas fa-comments"></i> 对话</h2>
                    <div class="chat-controls">
                        <button id="clearChat" class="btn btn-secondary">
                            <i class="fas fa-trash"></i> 清空
                        </button>
                        <button id="exportChat" class="btn btn-secondary">
                            <i class="fas fa-download"></i> 导出
                        </button>
                    </div>
                </div>
                
                <div class="chat-messages" id="chatMessages">
                    <div class="welcome-message">
                        <div class="message bot-message">
                            <div class="message-avatar">
                                <i class="fas fa-robot"></i>
                            </div>
                            <div class="message-content">
                                <p>您好！我是RobotAgent，您的智能机器人助手。我可以帮助您执行各种任务，包括机器人控制、语音交互等。有什么我可以帮助您的吗？</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 输入区域 -->
                <div class="chat-input-container">
                    <div class="input-modes">
                        <button id="textModeBtn" class="mode-btn active">
                            <i class="fas fa-keyboard"></i> 文本
                        </button>
                        <button id="voiceModeBtn" class="mode-btn">
                            <i class="fas fa-microphone"></i> 语音
                        </button>
                    </div>
                    
                    <!-- 文本输入 -->
                    <div class="text-input-area" id="textInputArea">
                        <div class="input-group">
                            <input type="text" id="messageInput" placeholder="请输入您的消息..." maxlength="500">
                            <button id="sendBtn" class="btn btn-primary">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>

                    <!-- 语音输入 -->
                    <div class="voice-input-area" id="voiceInputArea" style="display: none;">
                        <div class="voice-controls">
                            <button id="recordBtn" class="record-btn">
                                <i class="fas fa-microphone"></i>
                                <span>点击录音</span>
                            </button>
                            <div class="recording-status" id="recordingStatus" style="display: none;">
                                <div class="recording-animation">
                                    <div class="wave"></div>
                                    <div class="wave"></div>
                                    <div class="wave"></div>
                                </div>
                                <span>正在录音...</span>
                            </div>
                        </div>
                        <div class="voice-feedback" id="voiceFeedback"></div>
                    </div>
                </div>
            </div>

            <!-- 侧边栏 -->
            <aside class="sidebar">
                <!-- 机器人状态 -->
                <div class="panel">
                    <h3><i class="fas fa-info-circle"></i> 机器人状态</h3>
                    <div class="robot-status" id="robotStatus">
                        <div class="status-item">
                            <span class="label">连接状态:</span>
                            <span class="value" id="connectionStatus">未连接</span>
                        </div>
                        <div class="status-item">
                            <span class="label">当前任务:</span>
                            <span class="value" id="currentTask">空闲</span>
                        </div>
                        <div class="status-item">
                            <span class="label">情感状态:</span>
                            <span class="value" id="robotEmotion">😊</span>
                        </div>
                        <div class="status-item">
                            <span class="label">电池电量:</span>
                            <span class="value" id="batteryLevel">--</span>
                        </div>
                    </div>
                </div>

                <!-- 快捷指令 -->
                <div class="panel">
                    <h3><i class="fas fa-bolt"></i> 快捷指令</h3>
                    <div class="quick-commands">
                        <button class="quick-cmd-btn" data-command="你好">
                            <i class="fas fa-hand-wave"></i> 打招呼
                        </button>
                        <button class="quick-cmd-btn" data-command="帮我拿一杯水">
                            <i class="fas fa-glass-water"></i> 拿水
                        </button>
                        <button class="quick-cmd-btn" data-command="向前移动1米">
                            <i class="fas fa-arrow-up"></i> 前进
                        </button>
                        <button class="quick-cmd-btn" data-command="向左转90度">
                            <i class="fas fa-arrow-left"></i> 左转
                        </button>
                        <button class="quick-cmd-btn" data-command="停止所有动作">
                            <i class="fas fa-stop"></i> 停止
                        </button>
                        <button class="quick-cmd-btn" data-command="扫描周围环境">
                            <i class="fas fa-search"></i> 扫描
                        </button>
                    </div>
                </div>

                <!-- ROS2动作库 -->
                <div class="panel">
                    <h3><i class="fas fa-cogs"></i> 动作库</h3>
                    <div class="actions-list" id="actionsList">
                        <div class="loading">加载中...</div>
                    </div>
                </div>

                <!-- 对话历史 -->
                <div class="panel">
                    <h3><i class="fas fa-history"></i> 对话历史</h3>
                    <div class="history-list" id="historyList">
                        <div class="history-item">
                            <span class="time">今天</span>
                            <span class="summary">当前对话</span>
                        </div>
                    </div>
                </div>
            </aside>
        </main>

        <!-- 加载指示器 -->
        <div class="loading-overlay" id="loadingOverlay" style="display: none;">
            <div class="loading-spinner">
                <div class="spinner"></div>
                <p>处理中...</p>
            </div>
        </div>

        <!-- 通知容器 -->
        <div class="notification-container" id="notificationContainer"></div>
    </div>

    <!-- 音频播放器 -->
    <audio id="audioPlayer" style="display: none;"></audio>

    <script src="app.js"></script>
</body>
</html>